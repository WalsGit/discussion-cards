{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@walsgit/discussion-cards/./src/admin/components/Settings.js","webpack://@walsgit/discussion-cards/./src/admin/components/switchTagList.js","webpack://@walsgit/discussion-cards/./src/admin/index.js","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['admin/components/LoadingModal']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['app']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/Component']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/components/Button']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@walsgit/discussion-cards/external root \"flarum.core.compat['tags/utils/sortTags']\"","webpack://@walsgit/discussion-cards/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@walsgit/discussion-cards/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@walsgit/discussion-cards/webpack/bootstrap","webpack://@walsgit/discussion-cards/webpack/runtime/compat get default export","webpack://@walsgit/discussion-cards/webpack/runtime/define property getters","webpack://@walsgit/discussion-cards/webpack/runtime/hasOwnProperty shorthand","webpack://@walsgit/discussion-cards/webpack/runtime/make namespace object","webpack://@walsgit/discussion-cards/./admin.js"],"sourcesContent":["import ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport app from 'flarum/app';\r\nimport Button from 'flarum/common/components/Button';\r\nimport saveSettings from 'flarum/admin/utils/saveSettings';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\r\nimport SwitchTagList from './switchTagList';\r\nimport LoadingModal from 'flarum/admin/components/LoadingModal';\r\n\r\n\r\n\r\nexport default class Settings extends ExtensionPage {\r\n\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.settings = JSON.parse(app.data.settings.walsgit_discussion_cards || null);\r\n  }\r\n\r\n  content() {\r\n\r\n    if (!this.settings) {\r\n      return m('.ExtensionPage-settings', [\r\n        m('.container', {\r\n            style: {color: 'red', fontWeight: 'bold'}\r\n          },\r\n          icon('fas fa-exclamation-triangle', {style: {fontSize: '24px', marginRight: '10px'}}),\r\n          app.translator.trans('walsgit.admin.settings.settings_error'))\r\n      ]);\r\n    }\r\n\r\n    const settings = this.settings;\r\n    app.forum.data.attributes.walsgit_discussion_cards_default_imageUrl =\r\n      app.forum.attribute(\"baseUrl\") + \"/assets/\" +\r\n      app.data.settings.walsgit_discussion_cards_default_image_path;\r\n\r\n    return [\r\n      m('.ExtensionPage-settings', [\r\n        m('.container', [\r\n          m('Form', {\r\n            onsubmit: this.onsubmit.bind(this),\r\n          }, [\r\n            m('.Form-group', [\r\n              m('label', app.translator.trans('walsgit.admin.settings.default_img')),\r\n              m(UploadImageButton, {name: \"walsgit_discussion_cards_default_image\"}),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.previewText || false,\r\n                  onchange: () => {\r\n                    settings.previewText ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.preview_text')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.cardBadges || false,\r\n                  onchange: () => {\r\n                    settings.cardBadges ^= true\r\n                  },\r\n                },\r\n                app.translator.trans('walsgit.admin.settings.badges')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.cardFooter,\r\n                  onchange: () => {\r\n                    settings.cardFooter ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.actor_info')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.Replies,\r\n                  onchange: () => {\r\n                    settings.Replies ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.show_replies')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.onIndexPage,\r\n                  onchange: () => {\r\n                    settings.onIndexPage ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.output_on_index_page')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.Views,\r\n                  onchange: () => {\r\n                    settings.Views ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.show_views')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m(Switch, {\r\n                  state: settings.markCards,\r\n                  onchange: () => {\r\n                    settings.markCards ^= true\r\n                  },\r\n                }, app.translator.trans('walsgit.admin.settings.mark_cards')\r\n              ),\r\n            ]),\r\n            m('.Form-group', [\r\n              m('label', app.translator.trans('walsgit.admin.settings.desktop_card_width', {percent: settings.desktopCardWidth || 49})),\r\n              m('input', {\r\n                type: 'range',\r\n                min: 1,\r\n                max: 100,\r\n                step: 0.1,\r\n                value: settings.desktopCardWidth || 49,\r\n                oninput: e => {\r\n                  settings.desktopCardWidth = e.target.value;\r\n                },\r\n                style: {width: '100%'}\r\n              }),\r\n            ]),\r\n            m('.Form-group', [\r\n              m('label', app.translator.trans('walsgit.admin.settings.tablet_card_width', {percent: settings.tabletCardWidth || 49})),\r\n              m('input', {\r\n                type: 'range',\r\n                min: 1,\r\n                max: 100,\r\n                step: 0.1,\r\n                value: settings.tabletCardWidth || 49,\r\n                oninput: e => {\r\n                  settings.tabletCardWidth = e.target.value;\r\n                },\r\n                style: {width: '100%'}\r\n              }),\r\n            ]),\r\n            m('.Form-group', [\r\n              m('label', app.translator.trans('walsgit.admin.settings.small_cards')),\r\n              m('input.FormControl', {\r\n                type: 'number',\r\n                min: 0,\r\n                value: settings.smallCards,\r\n                oninput: e => {\r\n                  settings.smallCards = e.target.value;\r\n                }\r\n              }),\r\n            ]),\r\n            m('.Form-group', [\r\n              m('label', app.translator.trans('walsgit.admin.settings.choose_tags')),\r\n              m(SwitchTagList, {tags: settings.allowedTags}),\r\n              m(Button, {\r\n                  type: 'submit',\r\n                  className: 'Button Button--primary',\r\n                  loading: this.loading\r\n                }, app.translator.trans('core.admin.settings.submit_button')\r\n              ),\r\n            ]),\r\n          ]),\r\n        ])\r\n      ])\r\n    ]\r\n\r\n\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n    if (this.loading) return;\r\n    this.loading = true;\r\n    saveSettings({\r\n      walsgit_discussion_cards: JSON.stringify(this.settings),\r\n    });\r\n\r\n    app.modal.show(LoadingModal);\r\n    app.request({\r\n        method: 'DELETE',\r\n        url: app.forum.attribute('apiUrl') + '/cache',\r\n      })\r\n      .then(() => window.location.reload());\r\n  }\r\n\r\n}\r\n","import Component from \"flarum/common/Component\";\r\n\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport app from 'flarum/app';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport Button from 'flarum/common/components/Button';\r\nimport saveSettings from 'flarum/admin/utils/saveSettings';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport withAttr from 'flarum/common/utils/withAttr';\r\nimport sortTags from 'flarum/tags/utils/sortTags';\r\n\r\nexport default class SwitchTagList extends Component {\r\n\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.tags = this.attrs.tags;\r\n  }\r\n\r\n  view() {\r\n\r\n    return m('.TagGroup', [\r\n      m('ul.TagList', [\r\n        sortTags(app.store.all('tags')).map((tag) => {\r\n          const allowedTags = this.tags;\r\n          return [\r\n            m(Switch, {\r\n                id: tag.slug(),\r\n                state: (allowedTags.length) ? allowedTags.includes(tag.slug()) : false,\r\n                onchange: function () {\r\n                  this.state\r\n                    ? allowedTags.indexOf(this.id) !== -1 && allowedTags.splice(allowedTags.indexOf(this.id), 1)\r\n                    : allowedTags.push(this.id);\r\n                },\r\n                className: 'switchTags'\r\n              }, m(\"li\", {\r\n                style: {\r\n                  color: tag.color(),\r\n                  lineHeight: '20px',\r\n                  fontSize: '16px',\r\n                  marginLeft: !(tag.isPrimary() || tag.position() === null) ? '20px' : 0,\r\n                }\r\n              }, icon(tag.icon()), tag.name())\r\n            )\r\n          ];\r\n        })\r\n      ])\r\n    ])\r\n\r\n  }\r\n\r\n}\r\n","import app from 'flarum/app';\r\nimport Settings from './components/Settings';\r\n\r\n\r\napp.initializers.add('walsgit/discussion-cards', () => {\r\n  app.extensionData\r\n    .for('walsgit-discussion-cards')\r\n    .registerPage(Settings)\r\n});\r\n\r\n","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['admin/components/LoadingModal'];","module.exports = flarum.core.compat['admin/components/UploadImageButton'];","module.exports = flarum.core.compat['admin/utils/saveSettings'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/withAttr'];","module.exports = flarum.core.compat['tags/utils/sortTags'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/admin';\r\n"],"names":["ExtensionPage","app","Button","saveSettings","Switch","icon","UploadImageButton","SwitchTagList","LoadingModal","Settings","_ExtensionPage","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","settings","JSON","parse","data","walsgit_discussion_cards","content","m","style","color","fontWeight","fontSize","marginRight","translator","trans","forum","attributes","walsgit_discussion_cards_default_imageUrl","attribute","walsgit_discussion_cards_default_image_path","onsubmit","bind","name","state","previewText","onchange","cardBadges","cardFooter","Replies","onIndexPage","Views","markCards","percent","desktopCardWidth","type","min","max","step","value","oninput","e","target","width","tabletCardWidth","smallCards","tags","allowedTags","className","loading","preventDefault","stringify","modal","show","request","method","url","then","window","location","reload","default","Component","Stream","withAttr","sortTags","_Component","attrs","view","_this","store","all","map","tag","id","slug","length","includes","indexOf","splice","push","lineHeight","marginLeft","isPrimary","position","initializers","add","extensionData","registerPage","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}